import{_ as W,a as A}from"./@babel-Cv5OCJ0e.js";import{r as l}from"./react-Bab5vmyN.js";import{u as k}from"./use-latest-D6ZOC72I.js";import{u as I}from"./use-composed-ref-BxlP-tnS.js";var R={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},B=function(t){Object.keys(R).forEach(function(r){t.style.setProperty(r,R[r],"important")})},w=B,i=null,C=function(t,r){var e=t.scrollHeight;return r.sizingStyle.boxSizing==="border-box"?e+r.borderSize:e-r.paddingSize};function M(n,t,r,e){r===void 0&&(r=1),e===void 0&&(e=1/0),i||(i=document.createElement("textarea"),i.setAttribute("tabindex","-1"),i.setAttribute("aria-hidden","true"),w(i)),i.parentNode===null&&document.body.appendChild(i);var o=n.paddingSize,s=n.borderSize,a=n.sizingStyle,p=a.boxSizing;Object.keys(a).forEach(function(h){var m=h;i.style[m]=a[m]}),w(i),i.value=t;var d=C(i,n);i.value=t,d=C(i,n),i.value="x";var g=i.scrollHeight-o,f=g*r;p==="border-box"&&(f=f+o+s),d=Math.max(f,d);var c=g*e;return p==="border-box"&&(c=c+o+s),d=Math.min(c,d),[d,g]}var E=function(){},N=function(t,r){return t.reduce(function(e,o){return e[o]=r[o],e},{})},_=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],$=!!document.documentElement.currentStyle,j=function(t){var r=window.getComputedStyle(t);if(r===null)return null;var e=N(_,r),o=e.boxSizing;if(o==="")return null;$&&o==="border-box"&&(e.width=parseFloat(e.width)+parseFloat(e.borderRightWidth)+parseFloat(e.borderLeftWidth)+parseFloat(e.paddingRight)+parseFloat(e.paddingLeft)+"px");var s=parseFloat(e.paddingBottom)+parseFloat(e.paddingTop),a=parseFloat(e.borderBottomWidth)+parseFloat(e.borderTopWidth);return{sizingStyle:e,paddingSize:s,borderSize:a}},P=j;function y(n,t,r){var e=k(r);l.useLayoutEffect(function(){var o=function(a){return e.current(a)};if(n)return n.addEventListener(t,o),function(){return n.removeEventListener(t,o)}},[])}var G=function(t,r){y(document.body,"reset",function(e){t.current.form===e.target&&r(e)})},O=function(t){y(window,"resize",t)},Y=function(t){y(document.fonts,"loadingdone",t)},q=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],X=function(t,r){var e=t.cacheMeasurements,o=t.maxRows,s=t.minRows,a=t.onChange,p=a===void 0?E:a,d=t.onHeightChange,g=d===void 0?E:d,f=W(t,q),c=f.value!==void 0,h=l.useRef(null),m=I(h,r),L=l.useRef(0),S=l.useRef(),v=function(){var u=h.current,z=e&&S.current?S.current:P(u);if(z){S.current=z;var H=M(z,u.value||u.placeholder||"x",s,o),b=H[0],T=H[1];L.current!==b&&(L.current=b,u.style.setProperty("height",b+"px","important"),g(b,{rowHeight:T}))}},F=function(u){c||v(),p(u)};return l.useLayoutEffect(v),G(h,function(){if(!c){var x=h.current.value;requestAnimationFrame(function(){var u=h.current;u&&x!==u.value&&v()})}}),O(v),Y(v),l.createElement("textarea",A({},f,{onChange:F,ref:m}))},Q=l.forwardRef(X);export{Q as i};
