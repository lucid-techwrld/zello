import{c as E}from"./hast-util-is-element-CuOmiqQi.js";import{v as b}from"./unist-util-visit-parents-B1S0AetN.js";function I(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const R={},k=["math","script","style","svg","title"];function q(e,f,g){const u=E(R.ignore||k),d=P(f);let x=-1;for(;++x<d.length;)b(e,"text",m);function m(n,r){let c=-1,t;for(;++c<r.length;){const a=r[c],s=t?t.children:void 0;if(u(a,s?s.indexOf(a):void 0,t))return;t=a}if(t)return w(n,r)}function w(n,r){const c=r[r.length-1],t=d[x][0],a=d[x][1];let s=0;const y=c.children.indexOf(n);let v=!1,l=[];t.lastIndex=0;let o=t.exec(n.value);for(;o;){const p=o.index,A={index:o.index,input:o.input,stack:[...r,n]};let i=a(...o,A);if(typeof i=="string"&&(i=i.length>0?{type:"text",value:i}:void 0),i===!1?t.lastIndex=p+1:(s!==p&&l.push({type:"text",value:n.value.slice(s,p)}),Array.isArray(i)?l.push(...i):i&&l.push(i),s=p+o[0].length,v=!0),!t.global)break;o=t.exec(n.value)}return v?(s<n.value.length&&l.push({type:"text",value:n.value.slice(s)}),c.children.splice(y,1,...l)):l=[n],y+l.length}}function P(e){const f=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const g=!e[0]||Array.isArray(e[0])?e:[e];let h=-1;for(;++h<g.length;){const u=g[h];f.push([T(u[0]),$(u[1])])}return f}function T(e){return typeof e=="string"?new RegExp(I(e),"g"):e}function $(e){return typeof e=="function"?e:function(){return e}}export{q as f};
